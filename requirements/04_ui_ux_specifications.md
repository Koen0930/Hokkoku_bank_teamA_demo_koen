# UI/UX仕様 (UI/UX Specifications)

## 概要
本ドキュメントでは、AIシフト作成ツールのUI/UX仕様を定義します。Optamo風のデザインを参考に、直感的で使いやすいインターフェースを目指します。

## デザインコンセプト

### デザイン原則
1. **シンプルさ**: 必要な情報のみを表示し、操作を簡潔にする
2. **直感性**: 初見でも操作方法が理解できるUI
3. **効率性**: 少ないクリック数で目的を達成できる
4. **一貫性**: 全画面で統一されたデザイン言語
5. **アクセシビリティ**: 誰でも使いやすいユニバーサルデザイン

### カラーパレット
```css
/* Primary Colors */
--primary-blue: #2563eb;      /* メインアクション */
--primary-blue-light: #3b82f6; /* ホバー状態 */
--primary-blue-dark: #1d4ed8;  /* アクティブ状態 */

/* Secondary Colors */
--secondary-gray: #6b7280;    /* セカンダリテキスト */
--secondary-gray-light: #9ca3af; /* 非アクティブ要素 */
--secondary-gray-dark: #374151;  /* ボーダー */

/* Status Colors */
--success-green: #10b981;     /* 成功・正常状態 */
--warning-yellow: #f59e0b;    /* 警告 */
--error-red: #ef4444;         /* エラー・危険 */
--info-blue: #06b6d4;         /* 情報 */

/* Background Colors */
--bg-white: #ffffff;          /* メイン背景 */
--bg-gray-50: #f9fafb;        /* セクション背景 */
--bg-gray-100: #f3f4f6;       /* カード背景 */
--bg-gray-900: #111827;       /* ダークモード背景 */
```

### タイポグラフィ
```css
/* Font Family */
font-family: 'Inter', 'Noto Sans JP', sans-serif;

/* Font Sizes */
--text-xs: 0.75rem;    /* 12px - キャプション */
--text-sm: 0.875rem;   /* 14px - 小テキスト */
--text-base: 1rem;     /* 16px - 本文 */
--text-lg: 1.125rem;   /* 18px - 小見出し */
--text-xl: 1.25rem;    /* 20px - 見出し */
--text-2xl: 1.5rem;    /* 24px - 大見出し */
--text-3xl: 1.875rem;  /* 30px - タイトル */

/* Font Weights */
--font-normal: 400;
--font-medium: 500;
--font-semibold: 600;
--font-bold: 700;
```

## レイアウト構成

### 全体レイアウト
```
┌─────────────────────────────────────────────────────────────┐
│                        Header                                │
├─────────────────┬───────────────────────────────────────────┤
│                 │                                           │
│   Left Panel    │            Main Content                   │
│   (300px)       │                                           │
│                 │                                           │
│                 │                                           │
│                 │                                           │
│                 │                                           │
│                 │                                           │
└─────────────────┴───────────────────────────────────────────┘
```

### ヘッダー (Header)
- **高さ**: 64px
- **要素**: ロゴ、ユーザー情報、設定メニュー
- **背景色**: `--bg-white`
- **ボーダー**: `1px solid --secondary-gray-light`

### 左パネル (Left Panel)
- **幅**: 300px (固定)
- **要素**: 従業員リスト、フィルター、制約設定
- **背景色**: `--bg-gray-50`
- **スクロール**: 縦スクロール対応

### メインコンテンツ (Main Content)
- **幅**: 残り全幅
- **要素**: シフトテーブル、操作ボタン
- **背景色**: `--bg-white`
- **スクロール**: 横・縦スクロール対応

## 画面構成詳細

### 1. メイン画面 (シフト管理画面)

#### 左パネル構成
```
┌─────────────────┐
│ CSV取込         │
├─────────────────┤
│ 従業員リスト     │
│ ☑ 田中太郎      │
│ ☑ 佐藤花子      │
│ ☑ 鈴木一郎      │
│ ...             │
├─────────────────┤
│ フィルター       │
│ 日付: [____]    │
│ 役職: [____]    │
│ スキル: [____]  │
├─────────────────┤
│ 制約設定        │
│ 最小人員: [2]   │
│ 最大連勤: [5]   │
│ ...             │
├─────────────────┤
│ アクション       │
│ [自動生成]      │
│ [エクスポート]  │
└─────────────────┘
```

#### メインコンテンツ構成
```
┌─────────────────────────────────────────────────────────────┐
│ 2025年1月 第1週                    [前週] [今週] [次週]      │
├─────────────────────────────────────────────────────────────┤
│     │ 月  │ 火  │ 水  │ 木  │ 金  │ 土  │ 日  │              │
│     │1/6  │1/7  │1/8  │1/9  │1/10 │1/11 │1/12 │              │
├─────┼─────┼─────┼─────┼─────┼─────┼─────┼─────┤
│09:00│     │     │     │     │     │     │     │              │
├─────┼─────┼─────┼─────┼─────┼─────┼─────┼─────┤
│10:00│田中 │田中 │     │佐藤 │     │     │     │              │
├─────┼─────┼─────┼─────┼─────┼─────┼─────┼─────┤
│11:00│田中 │田中 │鈴木 │佐藤 │田中 │     │     │              │
│ ... │ ... │ ... │ ... │ ... │ ... │ ... │ ... │              │
└─────┴─────┴─────┴─────┴─────┴─────┴─────┴─────┘
```

### 2. CSV取込画面

#### モーダルダイアログ
```
┌─────────────────────────────────────────────────────────────┐
│ CSV取込                                            [×]      │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌─────────────────────────────────────────────────────┐    │
│  │                                                     │    │
│  │     📁 ファイルをドラッグ&ドロップ                    │    │
│  │        または クリックして選択                       │    │
│  │                                                     │    │
│  └─────────────────────────────────────────────────────┘    │
│                                                             │
│  サポート形式: CSV, Excel (.xlsx)                           │
│  最大ファイルサイズ: 10MB                                   │
│                                                             │
│  [サンプルファイルをダウンロード]                           │
│                                                             │
│                              [キャンセル] [アップロード]    │
└─────────────────────────────────────────────────────────────┘
```

### 3. 制約設定画面

#### 設定パネル
```
┌─────────────────────────────────────────────────────────────┐
│ 制約設定                                                    │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│ 基本制約                                                    │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 最小人員数    [2] 名/時間                               │ │
│ │ 最大人員数    [5] 名/時間                               │ │
│ │ 最大連続勤務  [5] 日                                   │ │
│ │ 最小休憩時間  [60] 分                                  │ │
│ └─────────────────────────────────────────────────────────┘ │
│                                                             │
│ 個別制約                                                    │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 従業員: [田中太郎 ▼]                                   │ │
│ │ 希望休日: ☑月 ☐火 ☐水 ☐木 ☐金 ☑土 ☑日              │ │
│ │ 勤務時間: [00:00] ～ [23:59] (24時間シフト制)        │ │
│ │ 最大勤務: [8] 時間/日                                 │ │
│ └─────────────────────────────────────────────────────────┘ │
│                                                             │
│                              [リセット] [保存]             │
└─────────────────────────────────────────────────────────────┘
```

## インタラクション設計

### ドラッグ&ドロップ操作

#### 従業員の移動
1. **ドラッグ開始**: 従業員名をマウスダウン
2. **ドラッグ中**: 半透明表示、移動可能エリアをハイライト
3. **ドロップ**: 有効なセルに配置、制約チェック実行
4. **フィードバック**: 成功時は緑色フラッシュ、エラー時は赤色フラッシュ

#### 視覚的フィードバック
```css
/* ドラッグ中の要素 */
.dragging {
  opacity: 0.5;
  transform: rotate(5deg);
  z-index: 1000;
}

/* ドロップ可能エリア */
.drop-zone-valid {
  background-color: rgba(16, 185, 129, 0.1);
  border: 2px dashed var(--success-green);
}

/* ドロップ不可エリア */
.drop-zone-invalid {
  background-color: rgba(239, 68, 68, 0.1);
  border: 2px dashed var(--error-red);
}
```

### リアルタイム警告表示

#### 制約違反の表示
```css
/* 警告セル */
.constraint-violation {
  background-color: rgba(239, 68, 68, 0.1);
  border: 1px solid var(--error-red);
  position: relative;
}

/* 警告アイコン */
.constraint-violation::after {
  content: "⚠️";
  position: absolute;
  top: 2px;
  right: 2px;
  font-size: 12px;
}
```

#### ツールチップ表示
```
┌─────────────────────────────────┐
│ ⚠️ 制約違反                     │
│ • 最大連続勤務日数を超過        │
│ • 最小休憩時間が不足            │
│                                 │
│ 推奨アクション:                 │
│ • 他の日に振り替える            │
│ • 休憩時間を延長する            │
└─────────────────────────────────┘
```

## レスポンシブデザイン

### ブレークポイント
```css
/* Mobile */
@media (max-width: 768px) {
  .left-panel {
    position: fixed;
    left: -300px;
    transition: left 0.3s ease;
  }
  
  .left-panel.open {
    left: 0;
  }
  
  .main-content {
    width: 100%;
  }
}

/* Tablet */
@media (min-width: 769px) and (max-width: 1024px) {
  .left-panel {
    width: 250px;
  }
}

/* Desktop */
@media (min-width: 1025px) {
  .left-panel {
    width: 300px;
  }
}
```

### モバイル対応
- **ハンバーガーメニュー**: 左パネルの表示/非表示切り替え
- **タッチ操作**: ドラッグ&ドロップのタッチ対応
- **スクロール**: 横スクロールでシフトテーブル全体を表示

## アクセシビリティ

### キーボード操作
```
Tab        : 次の要素にフォーカス移動
Shift+Tab  : 前の要素にフォーカス移動
Enter      : 選択・実行
Space      : チェックボックスの切り替え
Arrow Keys : テーブル内のセル移動
Escape     : モーダル・メニューを閉じる
```

### スクリーンリーダー対応
```html
<!-- セマンティックHTML -->
<table role="grid" aria-label="シフト表">
  <thead>
    <tr role="row">
      <th role="columnheader">時間</th>
      <th role="columnheader">月曜日</th>
      <!-- ... -->
    </tr>
  </thead>
  <tbody>
    <tr role="row">
      <th role="rowheader">09:00</th>
      <td role="gridcell" aria-label="月曜日 9時">田中太郎</td>
      <!-- ... -->
    </tr>
  </tbody>
</table>

<!-- ARIA属性 -->
<button aria-describedby="help-text">自動生成</button>
<div id="help-text">制約条件に基づいてシフトを自動生成します</div>
```

### カラーコントラスト
- **AA準拠**: 4.5:1以上のコントラスト比
- **AAA準拠**: 7:1以上のコントラスト比（重要な情報）

## アニメーション・トランジション

### マイクロインタラクション
```css
/* ボタンホバー */
.button {
  transition: all 0.2s ease;
}

.button:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

/* ローディング */
.loading {
  animation: pulse 2s infinite;
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

/* フェードイン */
.fade-in {
  animation: fadeIn 0.3s ease-in;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}
```

## エラー・成功状態の表示

### 通知システム
```
┌─────────────────────────────────────────────────────────────┐
│ ✅ シフトが正常に生成されました                              │
│    10名の従業員に対して7日分のシフトを作成しました          │
│                                                    [×]      │
└─────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────┐
│ ⚠️ 制約違反が検出されました                                 │
│    3件の制約違反があります。詳細を確認してください          │
│                                          [詳細] [×]        │
└─────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────┐
│ ❌ エラーが発生しました                                      │
│    サーバーとの通信に失敗しました。しばらく待ってから       │
│    再試行してください                            [再試行] [×] │
└─────────────────────────────────────────────────────────────┘
```

## パフォーマンス最適化

### 仮想化
- **大量データ**: 仮想スクロールによる表示最適化
- **遅延読み込み**: 必要な部分のみ描画

### キャッシュ戦略
- **画像**: ブラウザキャッシュ活用
- **データ**: Service Workerによるオフライン対応
- **計算結果**: メモ化による再計算回避
